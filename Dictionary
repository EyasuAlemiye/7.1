#DD1320 Tillämpad Datalogi
#Första halvan av laboration 7

'''#Överflödig kod
def felhanterare(data):
    while True:
        try:
            mitt=data
            sök_pokemon(mitt)
            return mitt
        except AttributeError:
            mitt=felhanterare(input('Pokemon finns inte med i vår dict. Ge mig en ny: '))
            return mitt
'''
class DictHash:
    def __init__(self,pokemonnamn,Typ1,Typ2,Total,HåP,Attack,Defense,SPatk,SPdef,Speed,Generation,Legendary):
        self.pokemonnamn=pokemonnamn 
        self.Typ1=Typ1
        self.Typ2=Typ2
        self.Total=Total
        self.HåP=HåP #hp...Lacka över att VSCode aldrig slutade föreslå 'help' så fick bli den stavelsen istället.
        self.Attack=Attack
        self.Defense=Defense
        self.SPatk=SPatk
        self.SPdef=SPdef
        self.Speed=Speed
        self.Generation=Generation
        self.Legendary=Legendary  
        

    def __str__(self):
        return f'{self.pokemonnamn}'

    def store(self,nyckel,data):
        pokedictionary[nyckel]=data

        return nyckel,data

    
    def search(self,nyckel):
        if nyckel in pokedictionary:
            värdet=pokedictionary.get(nyckel) #ger ut objekt

            return värdet
        else:
            raise KeyError('Pokemon saknas.')
      
    def contains(self,nyckel):
        if nyckel!=self.pokemonnamn:
            return False
        elif nyckel==self.pokemonnamn:
            return True
        #return finns(self.pokemonnamn,nyckel)

'''  #Överflödig kod
def finns(d, nyckel):
    if nyckel != d.pokemonnamn:
        return False
    elif nyckel==d.pokemonnamn:
        return True
'''


#tagen från tidigare labb.
pokedictionary={}
with open(r"fil", "r", encoding = "utf-8") as allapokemons:
        for rad in allapokemons:
            pokemon= rad.strip()
            specifikinfo=pokemon.split(',')  
            pokemonnamn=specifikinfo[1]
            Typ1=specifikinfo[2]
            Typ2=specifikinfo[3]
            Total=specifikinfo[4]
            HåP=specifikinfo[5] #hp...Lacka över att VSCode aldrig slutade föreslå 'help' så fick bli den stavelsen istället.
            Attack=specifikinfo[6]
            Defense=specifikinfo[7]
            SPatk=specifikinfo[8] 
            SPdef=specifikinfo[9]
            Speed=specifikinfo[10]
            Generation=specifikinfo[11]
            Legendary=specifikinfo[12]
            d=DictHash(pokemonnamn,Typ1,Typ2,Total,HåP,Attack,Defense,SPatk,SPdef,Speed,Generation,Legendary) 
            d.store(pokemonnamn,d) 


def sökapokemon(nyckel):
    x=d.search(nyckel)
    print(f'Pokemon finns!\nRelevant info om pokemon: {x.pokemonnamn}\nTyp 1:{x.Typ1}\nTyp 2:{x.Typ2}\nTotal: {x.Total}\nHp: {x.HåP}\nAttack: {x.Attack}\nDefense: {x.Defense}\nSPatk: {x.SPatk}\nSPdef: {x.SPdef}\nSpeed: {x.Speed}\nGeneration: {x.Generation}\nLegendary: {x.Legendary}')
    menyval()

'''
#Överflödig
def sök_pokemon(söktpokemon):
    while True:
        värdet=pokedictionary.get(söktpokemon)
        värdet.pokemonnamn=str(värdet.pokemonnamn)
        söktpokemon=str(söktpokemon)
        if värdet.pokemonnamn==söktpokemon:
            print(f'{söktpokemon} finns med i vårt dictionary')
            break
        else:
            print('Finns ej')
            break
'''
def läggatillpokemon(): #Fritt fram att lägga in nya pokemonkort som anropar store-metoden.
    poke=str(input('Vad är det för pokemon du vill lägga till?: '))
    pokemonstats=[input('Ange Typ1:'),input('Ange Typ2:'),
                input('Ange Total:'),input('Ange Hp:'),input('Ange Attack:'),
                input('Ange Defense:'),input('Ange SPatk:'),input('Ange SPdef:'),input('Ange Speed:'),
                input('Ange Generation:'),input('Ange Legendary:')]
    d.store(poke,DictHash(poke,pokemonstats[0],pokemonstats[1],pokemonstats[2],pokemonstats[3],pokemonstats[4],pokemonstats[5],pokemonstats[6],pokemonstats[7],pokemonstats[8],pokemonstats[9],pokemonstats[10]))
    menyval()

def menyval():
    vald=int(input('Vad vill du göra?\n 1: Lägga in ny pokemonkort?\n 2: Slå upp pokemon.\n 3. Avsluta '))
    if vald==1:
        läggatillpokemon()
    if vald==2:
        pokemoninput=input('Vilket pokemon vill du slå upp? ')
        sökapokemon(pokemoninput)
    if vald==3:
        print('Program avslutad')

menyval()
